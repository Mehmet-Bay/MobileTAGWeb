<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Mobile-TAG Vehicle QR Generator",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Web",
      "description": "Generate a vehicle QR code that allows drivers to load vehicle and contact information directly into the Mobile-TAG app, avoiding manual data entry or phone calls. The QR code helps drivers document vehicle information faster and can only be read by the Mobile-TAG application.",
      "url": "https://mobiletag-auto.com/qrcodegen",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "SEK"
      },
      "potentialAction": {
        "@type": "CreateAction",
        "name": "Create vehicle QR code for Mobile-TAG",
        "target": "https://mobiletag-auto.com/qrcodegen"
      }
    }
  </script>
  <script>
    window.googletag = window.googletag || { cmd: [] };

    googletag.cmd.push(function () {
    googletag.pubads().setRequestNonPersonalizedAds(1);
  });

    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }

    gtag('consent', 'default', {
      ad_storage: 'denied',
      analytics_storage: 'denied',
      personalization_storage: 'denied',
      functionality_storage: 'granted',
      security_storage: 'granted'
    });

    gtag('set', 'ads_data_redaction', true);
    gtag('set', 'restricted_data_processing', true);
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1919246518124978"
     crossorigin="anonymous">
  </script>
  <link rel="icon" type="image/png" href="drawable/mobile_tag_logo.png">
  <title>Mobile-TAG QR Code Generator</title>
  <meta name="description" content="Generate a QR code for your vehicle to quickly load vehicle-related information in the Mobile-TAG app in case of a minor traffic incident."/>
  <style>
    body {
      border-radius: 10px; 
      border: 1px outset #ffaa00;
      box-shadow: 0 0 15px;
      justify-content: center;
      align-items: center;
      text-align: center;
      background-color: #000000;
      color: #FFBF00;
      font-family: serif;
    }
    .parent {
      display: flex;
      justify-content: center; 
      align-items: center;     
    
    }
    h1 {
      margin: 0;
      font-size: clamp(30px,4vw,50px);
      text-align: center;
      -webkit-text-fill-color: antiquewhite;
      text-shadow: 0 0 10px #FFBF00;
    }
    h2 {
      margin: 0;
      text-align: center;
      font-size: 50px;
      -webkit-text-fill-color: antiquewhite;
    }
    h3 {
      margin: 0;
      margin-top: 2%;
      -webkit-text-fill-color: #FFBF00;
      padding-left: 5%;
      padding-right: 5%;
      padding-bottom: 2%;
      font-size: clamp(15px, 2vw, 30vw);
      text-align: center;
    }
    .headContent {
      width: auto;
      justify-content: center;
    }
    input {
      margin-bottom: 10px;
      width: 100%;
      max-width: 250px;
    }
    .picker {
      margin-top: 1%;
      margin-bottom: 1%;
      height: 160px;
      width: 100%;
      overflow-y: scroll;
      scroll-snap-type: y mandatory;
      background-color: #111;
      border: 2px solid #FFBF00;
      border-radius: 10px;
      color: #FFBF00;
      text-align: center;
    }
    .picker div {
      height: 30px;
      display: flex;
      align-items: start;
      justify-content: start;
      scroll-snap-align: start;
      padding-left: 1%;
      font-size: clamp(11px, 1.4vw, 25px);
      cursor: pointer;
    }
    button {
      margin-top: 10px;
      padding: 8px 16px;
      background-color: #FFBF00;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background-color: #ffaa00;
    }
    .container {
      display: flex;
      justify-content: center;
      padding-top: 1%;
      border-radius: 15px;
      box-shadow: 0 0 15px  #ffaa00;
      margin-top: 10%;
      width: 100%;
      max-width: 650px;
      padding-left: 1%;
      padding-right: 1%;
      margin: auto;
      background-color: #cbc8c8;
      gap: 5%;
    }
    .container-horizonatalLeft {
      justify-items: auto;
      padding-left: 1%;
      text-align: start;
      width: 100%;
    }
    .container-horizonatalRight {
      justify-items: auto;
      text-align: end;
      padding-right: 1%;
      width: 100%;
      justify-items: end;
    }
  .qr-card {
    max-width: 250px;
    width: 100%;
    padding: 1%;
    border: 1px solid #FFBF00;
    border-radius: 15px;
    background-color: #111;
    color: #FFBF00;
    text-align: center;
    box-shadow: 0 0 15px rgba(255,191,0,0.5);
  }
  .qr-card .logo {
    max-width: 50%;
  }
  .qr-card .regqr {
    font-size: 24px;
    font-weight: bold;
    margin: 1% 0;
    margin-bottom: auto;
  }
  #qrcode {
    max-width: 260px;
    margin: auto;
    display: flex;
    justify-content: center;
    align-items: center;  
    background-color: white;
    padding: 2%;
    min-height: auto;         
  }
  #qrcode canvas {
    width: 100% !important;
    height: auto !important;
  }
  .labelRed {
    color: red;
    font-size: clamp(16px, 2vw, 20px);
    font-weight: bold;
  }
  .labelBlack {
    color: black;
    font-size: clamp(16px, 2vw, 20px);
    font-weight: bold;
  }
  .checkbox-group {
  display: flex;
  justify-self: end;
  width: 80%;
  border-radius: 15px;
  background-color: antiquewhite;
  margin: 0;
  gap: 0em;       
  }
  /*
  .checkbox-group label {
    font-size: 5px;
  }
  */
  .adsbygoogle {
    /*background: #eee;*/
    background-color: rgba(20,55,55,0.0);
    border: 1px dashed #999;
  }
  input[type="checkbox"],
  label {
  display: inline-block;  
  vertical-align: middle; 
  }
#langDropdown {
  display: inline-block;
  background: black;
  border: 1px solid #FFBF00;
  padding: 0;
  margin: 0;
  list-style: none;
  max-width: 130px;
  width: 100%;
  z-index: 9999;
  max-height: 100px;
  overflow-y: auto;
  border-radius: 5px;
}

#langDropdown li {
  padding: 8px;
  cursor: pointer;
  font-size: clamp(15px, 1.7vw, 20px);
  color: #FFBF00;          
}

#langDropdown li:hover {
  color: white;            
  background: black;       
}
.ads-layout {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  gap: 1%;
  width: 100%;
  padding: 0 1%;
}

.side-ad {
  display: block;
  width: 25%;
  max-width: 300px;
  height: auto;
}
nav {
  display: flex;
  justify-content: end;
  background-color: #000000;
  padding-left: 1%;
  padding-right: 1%;
}
nav a {
  color: #000000;
  text-decoration: none;
  margin: 0 1vw;
  font-weight: bold;
  transition: color 0.3s ease;
}
.mobile-menu-btn {
  align-self: center;
  background: none;
  border: none;
  color: #FFBF00;
  font-size: clamp(10px, 2vw, 30px);
  font-weight: bold;
  cursor: pointer;
}
nav .mobile-menu-btn:hover {
  color: #ffffff;
  flex-wrap: wrap;
}
@media (max-width: 767px) {
  .side-ad {
    display: none;
  }
  .ads-layout {
    flex-direction: column;
    align-items: center;
  }
  
}
@media (min-width: 768px) {
  .qr-card {
    max-width: 420px;
  }
  #qrcode {
    max-width: 300px;
  }
  #langDropdown {
    max-width: 200px;
  }
}
html, body {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
}
</style>
</head>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-1MWDYKZ1W7"></script>

<body oncontextmenu="return false;">
  <header class="headContent" style="justify-content: center;">
    <!--<h1 class="centered-title">Mobile-TAG</h1>-->
    <div style="width: 100%; text-align: center;">
      <img src="drawable/nylogo.png" alt="" width="50%">
    </div>
    <nav>
      <a class="mobile-menu-btn" href="index.html">Main page</a>
    </nav>
    <div style="align-items: center; padding-left: 3%; padding-right: 3%;">
    <h1 class="centered-title">QR Code Generator</h1>
    <img src="drawable/qr_code.png" alt="picture describing QR Code Generator about how QR is generated" width="50%">
    <p id="qrTextInfo" href="#" style="font-size: clamp(14px, 2vw, 25px); text-align: start; padding-left: 5%; padding-right: 5%;">
      Here you can generate a unique QR code for each vehicle. By entering basic vehicle-related information, a QR code can be created, downloaded, and printed.
      The QR code can be placed inside the vehicle so that drivers can scan it with the Mobile-TAG app if an incident occurs.
      This helps make it easier to access and record relevant vehicle information without manual entry. 
      This feature is free to use and may be helpful for private vehicle owners, rental companies, leasing fleets, and logistics operators. 
      Fields marked in red are required. Please ensure that the information entered is accurate.      
    </p>
    <p style="font-size: clamp(14px, 2vw, 25px); text-align: start; padding-left: 5%; padding-right: 5%;">
      If you only want to try the QR code generator, you can enter sample or test information instead of real data. This allows you to explore how the feature works before using it with actual vehicle details.
    </p>
      <ins class="adsbygoogle"
        style="display:block; width: 100%; height:auto; max-height: 10vw; border-radius: 0px;"
        data-ad-client="ca-pub-1919246518124978"
        data-ad-slot="7442912993"
        data-ad-format="auto"
        data-full-width-responsive="true">
      </ins>
    </div>
    <h3 id="qrMessageInfo" href="#" style="padding-left: 5%; padding-right: 5%;">
      The document generated by Mobile-TAG is protected with a simple password to help reduce the risk of unintended access.
    </h3>
    <h3 id="qrPassTip" href="#">
      QR codes generated with Mobile-TAG are intended to be scanned directly inside the Mobile-TAG application.
      Because the code contains structured and protected vehicle information, it may appear unreadable or unclear when scanned with a standard QR scanner.
      This helps ensure that the information is loaded correctly into the Mobile-TAG incident document.
    </h3>
    <div style="padding-left: 5%; padding-right: 5%; -webkit-text-fill-color: antiquewhite;">
      <h3 style="padding: 0%; -webkit-text-fill-color: antiquewhite;">
        Email addresses in the form
      </h3>
      <p style="font-size: clamp(12px, 1.7vw, 25px); text-align: start;">
        When email addresses are entered in the form for both the vehicle owner and the insurance company, the Mobile-TAG application can automatically load these addresses when the driver chooses to share the document.
      </p>
      <p style="font-size: clamp(12px, 1.7vw, 25px); text-align: start;">
        This means that both the vehicle owner’s and the insurance company’s email addresses are pre-filled in the email message as recipients.
      </p>
      <p style="font-size: clamp(12px, 1.7vw, 25px); text-align: start;">
        If these fields are left empty, the driver will need to enter the email addresses manually when sharing the document.
      </p>
      <ins class="adsbygoogle"
        style="display:block; width: 100%; height:auto; max-height: 10vw; border-radius: 0px;"
        data-ad-client="ca-pub-1919246518124978"
        data-ad-slot="5125647515"
        data-ad-format="auto"
        data-full-width-responsive="true">
      </ins>
    </div>
    <div style="display: flex; justify-content: center; position: relative; padding-top: 3%;">
      <h3 id="formLang" style="text-align: left; padding-right: 1%;">Select form language</h3>  
      <h3 id="langSelect" style="text-align: left; cursor: pointer; padding-right: 1%; padding-left: 0.1%;"></h3>
      <ul id="langDropdown"></ul>
    </div>
    <p style="font-size: clamp(14px, 1.7vw, 25px); text-align: center;">Please note that changing the language in the form does not affect the final document.</p>
  </header>
<script>
    function loadLanguage(langName) {
      const fileName = "json/" + langName.toLowerCase() + ".json"; 
      console.log("språk: ") + fileName;
      fetch(fileName)
        .then(resp => resp.json())
        .then(data => {
          document.getElementById("labelOwnerName").innerText = data.vehicleOwnerName;
          document.getElementById("labelOwnerAddress").innerText = data.vehicleOwnerAddress;
          document.getElementById("labelOwnerId").innerText = data.vehicleOwnerId;
          document.getElementById("labelOwnerTelNo").innerText = data.vehicleOwnerTel;
          document.getElementById("labelOwnerMail").innerText = data.vehicleOwnerMail;
          document.getElementById("labelVehicleBrand").innerText = data.vehicleMake;
          document.getElementById("labelVehicleModel").innerText = data.vehicleModel;
          document.getElementById("labelVehicleType").innerText = data.vehicleType;
          document.getElementById("labelRegNo").innerText = data.vehicleRegistrationNo;
          document.getElementById("labelCityReg").innerText = data.vehicleRegistrationCity;
          document.getElementById("labelRegCountry").innerText = data.vehicleRegistrationCountry;
          document.getElementById("labelInsuranceName").innerText = data.vehicleInsuranceName;
          document.getElementById("labelInsuranceTel").innerText = data.vehicleInsuranceTel;
          document.getElementById("labelInsuranceMail").innerText = data.vehicleInsuranceMail;
          document.getElementById("labelInsuranceNo").innerText = data.vehicleInsurancePolicyNo;
          document.getElementById("labelInsuranceAgent").innerText = data.vehicleInsuranceAgent;
          document.getElementById("labelQRService").textContent = data.thisQrService;
          document.getElementById("labelComprehensive").innerText = data.vehicleInsuranceCarrierDamage;
          document.getElementById("labelComprehensiveYes").innerText = data.QuestionYes;
          document.getElementById("labelComprehensiveNo").innerText = data.QuestionNo;
          document.getElementById("labelValueAddedTax").innerText = data.VBownertax;
          document.getElementById("labelValueAddedTaxYes").innerText = data.PropertyDamageYes;
          document.getElementById("labelValueAddedTaxNo").innerText = data.PropertyDamageNo;
          document.getElementById("langSelect").innerText = ": " + langName;
        })
        .catch(err => console.error("Could not load languages: ", err));
    }
    window.addEventListener("DOMContentLoaded", () => {
      loadLanguage("en");
    });

    loadLanguage("English");

    fetch("en.json")
      .then(resp => resp.json())
      .then(data => {
        const dropdown = document.getElementById("langDropdown");
        const langSelect = document.getElementById("langSelect");

        data.languages.forEach(lang => {
          const li = document.createElement("li");
          li.textContent = lang;
          li.style.padding = "8px";
          li.style.cursor = "pointer";

          li.addEventListener("click", () => {
            loadLanguage(lang);
          });

          dropdown.appendChild(li);
        });

        langSelect.addEventListener("click", () => {
          dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
          const rect = langSelect.getBoundingClientRect();
          dropdown.style.left = rect.left + "px";
          dropdown.style.top = rect.bottom + "px";
        });
      });
  </script>
  <div style="display: flex; padding-left: 1%; padding-right: 1%; justify-content: center;">
      <ins class="adsbygoogle side-ad"
        
        data-ad-client="ca-pub-1919246518124978"
        data-ad-slot="8462257296"
        data-ad-format="auto"
        data-full-width-responsive="true">
      </ins>
  <div class="container"> 
    <div class="container-horizonatalLeft" >
      <label class="labelRed" id="labelOwnerName" for="ownersName"></label><br>
      <input class="userInput" id="ownersName" type="text" oninput="checkForm()"><br>
      <label class="labelBlack" id="labelOwnerAddress" for="ownersAddress"></label><br>
      <input class="userInput" id="ownersAddress" type="text"><br>
      <label class="labelBlack" id="labelOwnerId" for="ownersIdNo"></label><br>
      <input class="userInput" id="ownersIdNo" type="text" disabled><br>
      <label class="labelRed" id="labelOwnerTelNo" for="ownersTel"></label><br>
      <input class="userInput" id="ownersTel" type="tel" oninput="checkForm()"><br>
      <label class="labelRed" id="labelOwnerMail" for="ownersMail"></label><br>
      <input class="userInput" id="ownersMail" type="text"><br>
      <label class="labelRed" id="labelVehicleBrand" for="vehicleMake"></label><br>
      <input class="userInput" id="vehicleMake" type="text" oninput="checkForm()"><br>
      <label class="labelBlack" id="labelVehicleModel" for="vehicleModel"></label><br>
      <input class="userInput" id="vehicleModel" type="text"><br>
      <label class="labelBlack" id="labelVehicleType" for="vehicleType"></label><br>
      <input class="userInput" id="vehicleType" type=""><br>
      <label class="labelRed" id="labelRegNo" for="regnr"></label><br>
      <input class="userInput" id="regnr" type="text" oninput="checkForm()"><br>
      <label class="labelBlack" id="labelCityReg" for="cityReg"></label><br>
      <input class="userInput" id="cityReg" type="text"><br>
      <label class="labelRed" id="labelRegCountry" for="regCountry"></label><br>
      <div id="countryPicker" class="picker"></div>
      <input class="userInput" id="regCountry" type="text" placeholder="" readonly><br>
    </div>
    <div class="container-horizonatalRight">
      <label class="labelRed" id="labelInsuranceName" for="insuranceCompanyName"></label><br>
      <input class="userInput" id="insuranceCompanyName" type="text" oninput="checkForm()"><br>
      <label class="labelBlack" id="labelInsuranceTel" for="insuranceTel"></label><br>
      <input class="userInput" id="insuranceTel" type="tel"><br>
      <label class="labelBlack" id="labelInsuranceMail" for="insuranceMail"></label><br>
      <input class="userInput" id="insuranceMail" type="text"><br>
      <label class="labelBlack" id="labelInsuranceNo" for="policyNo"></label><br>
      <input class="userInput" id="policyNo" type="text"><br>
      <label class="labelBlack" id="labelInsuranceAgent" for="agentInfo"></label><br>
      <input class="userInput" id="agentInfo" type="text"><br>
    <div style="background-color: antiquewhite; padding: 1%; text-align: start; border-top-left-radius: 15px; border-top-right-radius: 15px;">
      <label class="labelBlack" id="labelComprehensive"></label>
      <div style="display: flex; gap: 1em; margin-top: 0.5em;">
        <label class="labelBlack" for="comprehensiveYes" id="labelComprehensiveYes" style="width: auto;"></label>
        <input type="radio" id="comprehensiveYes" name="comprehensiveInsurance" value="Yes" style="width: auto;">
        <label class="labelBlack" for="comprehensiveNo" id="labelComprehensiveNo" style="width: auto;"></label>        
        <input type="radio" id="comprehensiveNo" name="comprehensiveInsurance" value="No" checked style="width: auto;">
      </div>
    </div>
    <div style="background-color: antiquewhite; padding: 1%; text-align: start; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
      <label class="labelBlack" id="labelValueAddedTax"></label>
      <div style="display: flex; gap: 1em; margin-top: 0.5em;">
        <label class="labelBlack" for="vatYes" id="labelValueAddedTaxYes" style="width: auto;"></label>        
        <input type="radio" id="vatYes" name="valueAddedTax" value="Yes" style="width: auto;">
        <label class="labelBlack" for="vatNo" id="labelValueAddedTaxNo" style="width: auto;"></label>        
        <input type="radio" id="vatNo" name="valueAddedTax" value="No" checked style="width: auto;">
      </div>
    </div>
    <br>
      <label class="labelBlack" style="text-align: center;" id="thisService"></label>
      <button id="buttonGen" disabled onclick="generateQR()">Generate QR Code</button>
      <button onclick="deleteFields()">Delete</button>
      <br>
      <label class="labelBlack" id="labelQRService" style="text-align: center;"></label><br>
      <div id="qrCard" class="qr-card">
        <img src="drawable/nylogo.png" class="logo">
        <p id="regQR" class="regqr"></p>
      <div id="qrcode"></div>
      <label style="font-size: clamp(13px, 2vw, 20px); font-weight: normal;">www.mobiletag-auto.com</label>
      </div>
    <button onclick="downloadCard()">Download QR Code as image</button>
  </div>
  </div>
      <ins class="adsbygoogle side-ad"
        
        data-ad-client="ca-pub-1919246518124978"
        data-ad-slot="9741773279"
        data-ad-format="auto"
        data-full-width-responsive="true">
      </ins>
  </div>
<script 
  async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1919246518124978"
  crossorigin="anonymous">
</script>
  <!-- QRCode.js bibliotek -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  
<script>
    function checkForm() {
  const requiredIds = [
    "ownersName",
    "ownersTel",
    "ownersMail",
    "vehicleMake",
    "regnr",
    "regCountry",
    "insuranceCompanyName"
  ];

  const anyEmpty = requiredIds.some(id => {
    return document.getElementById(id).value.trim() === "";
  });
  document.getElementById("buttonGen").disabled = anyEmpty;
}
  async function loadCountries() {
    try {
      const response = await fetch("en.json");
      const data = await response.json();

      const picker = document.getElementById("countryPicker");
      document.getElementById("thisService").textContent = data.thisQrService;
      document.getElementById("qrTextInfo").textContent = data.qrText;
      document.getElementById("qrMessageInfo").textContent = data.qrMessage;
      document.getElementById("qrPassTip").textContent = data.qrMessageTip;
      picker.innerHTML = "";

      data.countries.forEach(country => {
        const div = document.createElement("div");
        div.textContent = country;
        div.addEventListener("click", () => {
          document.getElementById("regCountry").value = country;
        });
        picker.appendChild(div);
      });
    } catch (err) {
      console.error("could not load countries:", err);
    }
  }
  loadCountries();
async function generateQR() {
  const fields = [
    "ownersName", "ownersAddress", "ownersIdNo", "ownersTel", "ownersMail",
    "vehicleMake", "vehicleModel", "vehicleType", "regnr", "cityReg", "regCountry",
    "insuranceCompanyName", "insuranceTel", "insuranceMail", "policyNo", "agentInfo"
  ];

  let qrData = {};
  let values = [];

  fields.forEach(id => {
    let val = document.getElementById(id).value.trim();

    if (id === "regnr" || id === "vehicleMake") {
      val = val.toUpperCase();
    } else {
      val = val.toLowerCase().replace(/\b\w/g, char => char.toUpperCase());
    }

    if (val === "") val = " ";
    qrData[id] = val;
    values.push(val);
  });

  const radioGroups = [
    { name: "comprehensiveInsurance", key: "comprehensiveInsurance" },
    { name: "valueAddedTax", key: "valueAddedTax" }
  ];

  radioGroups.forEach(group => {
    const selected = document.querySelector(`input[name="${group.name}"]:checked`);
    const val = selected ? selected.value : "No"; 
    qrData[group.key] = val;
    values.push(val);
  });

  document.getElementById("regQR").textContent = document.getElementById("regnr").value.toUpperCase();

  let vehicleInfo = values.join("#");
  console.log(vehicleInfo);

  try {
    const response = await fetch("https://apiemco.mobiletag-auto.com/api/encrypt", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ data: vehicleInfo })
    });

    if (!response.ok) {
      throw new Error("Encryption error server side: " + response.status);
    }

    const json = await response.json();
    const encrypted = json.encrypted;

    document.getElementById("qrcode").innerHTML = "";
    new QRCode(document.getElementById("qrcode"), {
      text: encrypted,
      colorDark: "#000000",
      colorLight: "#ffffff",
      correctLevel: QRCode.CorrectLevel.L
    });

  } catch (err) {
    alert("Sometthing went wrong when generating QR code.");
  }
}

  function downloadQR() {
    const canvas = document.querySelector("#qrcode canvas");
    if (!canvas) {
      alert("Generate a QR code first!");
      return;
    }
    const link = document.createElement("a");
    link.href = canvas.toDataURL("image/png");
    link.download = "qrcode.png";
    link.click();
  }
  function deleteFields() {
      const fields = [
    "ownersName", "ownersAddress", "ownersIdNo", "ownersTel", "ownersMail",
    "vehicleMake", "vehicleModel", "vehicleType", "regnr", "cityReg", "regCountry",
    "insuranceCompanyName", "insuranceTel", "insuranceMail", "policyNo", "agentInfo"
  ];
    let qrData = {};
    let values = [];
    fields.forEach(id => {
    let val = document.getElementById(id).value;
    if (val !== "") val = ""; 
    //qrData[id] = val;
    document.getElementById(id).value = val;
    checkForm();
    document.getElementById("qrcode").innerHTML = "";
    document.getElementById("regQR").textContent = "";
  });
}
</script>
<script>
function downloadCard() {
  const card = document.getElementById("qrCard");
  const regnr = document.getElementById("regnr").value || "qr_code";

  if (!document.querySelector("#qrcode canvas")) {
    showAlert("Generate a QR code first!");
    return;
  }

  
  const targetWidth = 320;  // px
  const targetHeight = 400; // px

  html2canvas(card, { scale: 4 }).then(canvas => {
    const scaledCanvas = document.createElement("canvas");
    scaledCanvas.width = targetWidth;
    scaledCanvas.height = targetHeight;

    const ctx = scaledCanvas.getContext("2d");
    ctx.drawImage(canvas, 0, 0, targetWidth, targetHeight);

    const link = document.createElement("a");
    link.href = scaledCanvas.toDataURL("image/png");
    link.download = `${regnr}.png`;
    link.click();
  });
}
</script>

<div id="customAlert" class="alert-overlay" style="display:none;">
  <div class="alert-box">
    <h3 id="alertTitle">Notice</h3>
    <p id="alertMessage"></p>
    <button id="alertOk">OK</button>
  </div>
</div>

<style>
  .alert-overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.75);
    backdrop-filter: blur(6px);
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.3s ease;
  }

  .alert-box {
    background: #000;
    border: 2px solid #FFBF00;
    border-radius: 15px;
    padding: 2em;
    max-width: 400px;
    color: #FFBF00;
    text-align: center;
    box-shadow: 0 0 25px rgba(255,191,0,0.6);
    font-family: serif;
    animation: glowIn 0.4s ease;
  }

  .alert-box h3 {
    color: #FFBF00;
    font-size: 1.6em;
    text-shadow: 0 0 10px #FFBF00;
    margin-bottom: 10px;
  }

  .alert-box p {
    color: antiquewhite;
    font-size: 1.1em;
    margin-bottom: 20px;
  }

  .alert-box button {
    background-color: #FFBF00;
    border: none;
    border-radius: 10px;
    color: black;
    font-weight: bold;
    padding: 8px 20px;
    cursor: pointer;
    transition: 0.2s ease;
  }

  .alert-box button:hover {
    background-color: #ffcc33;
    box-shadow: 0 0 10px #FFBF00;
  }

  @keyframes fadeIn {
    from { opacity: 0; } to { opacity: 1; }
  }

  @keyframes glowIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }
</style>

<script>
  function showAlert(title, message) {
    document.getElementById('alertTitle').innerText = title;
    //document.getElementById('alertMessage').innerText = message;
    document.getElementById('customAlert').style.display = 'flex';
  }

  document.getElementById('alertOk').addEventListener('click', () => {
    document.getElementById('customAlert').style.display = 'none';
  });
</script>

</body>

</html>
